# `filter-branch`로 여러 개의 커밋 메시지 수정하기

우리 회사에는 커밋메시지 포맷이 있다. Jira에서 이슈 티켓을 발행하고 이 티켓넘버를 prefix로 사용하는데, 예를 들면 이런 식이다.

```
MYSERVICE-100 이러저러한 버그 수정
```

프로젝트 규모에 따라 다르지만, 대개 적게는 5~6개, 많게는 30개 넘게 이 이슈 티켓을 기반으로 작업을 하게 되는데, 오늘 확인해 보니 티켓 번호를 헷갈려서 대략 35개 정도의 커밋에 잘못된 티켓넘버를 남기게 되었다.

rebase -> reword 신공으로 수정할 수 있긴 하지만, 이렇게 작업하면

1. 커밋 수정 창이 뜬다.
2. 커밋 메시지를 수정한다.
3. 저장하고 닫기
4. 1로

를 30번 넘게 해야 하고, 그러다 또 헷갈려서 괴상한 번호로 바꿔버리면 낭패기 때문에 스크립트의 힘을 빌리기로 했다.

git의 `filter-branch`는 현재 작업중인 브랜치의 커밋 메시지/파일시스템 등을 일괄적으로 수정하는 커맨드이며, 보통 공개 저장소에 올라가면 안 되는(비밀번호 같은) 정보를 삭제하는 용도로 많이 쓰인다. `HEAD`부터 `HEAD~40`까지의 prefix를 MYSERVICE-100에서 MYSERVICE-101로 바꾼다고 가정하자. 그럼 이 때 사용할 커맨드는

```
git filter-branch --msg-filter 'sed -e s/MYSERVICE-100/MYSERVICE-101/g' HEAD~40..HEAD
```

한 번 외워두면 두고두고 쓸 만하다.
