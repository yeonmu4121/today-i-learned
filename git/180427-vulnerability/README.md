# github에서 패키지 의존성 보안 이슈 해결하기

오늘 아침, github에서 이런 메일이 왔다.

![mail](mail.png)

TIL을 작성하면서 테스트 코드를 작성했었는데, 거기에 있는 패키지 하나가 보안적으로 문제가 있다는 모양이다.

![dependency-vulnerable](dependency-graph-vulnerable.png)

링크를 클릭하면 이렇게 뜬다. `4.2.1`에 밑줄이 있는데, 클릭하면 최소 어느 버전까지 버전업을 해야 하는지 확인할 수 있다.

![repo-vulnerable](repo-vulnerable.png)

저장소에 들어가도 이런 식으로 문제가 있다는 것을 확인할 수 있다.

`npm audit fix`라는 커맨드로 수정 가능하다. 혹 문제가 발생할 경우, `--force` 옵션을 붙여 해결하자.

![dependency-resolved](dependency-graph-resolved.png)

이슈가 해결되면 경고 마크가 사라진다.

다만 이렇게 해도 문제가 해결되지 않는 경우가 있는데, 해당 라이브러리가 아직 패치되지 않았을 경우이다. 예를 들어 내가 A라는 라이브러리를 사용하고 있고 이 라이브러리가 보안 이슈가 있는 B를 디펜던시로 가지고 있을 때, B는 패치되어서 B'으로 수정되었지만 A가 이를 반영하지 않았을 경우이다. 이런 경우엔 해당 라이브러리의 레포에 이슈라이징을 하든지, 직접 PR을 날리든지, 아니면 같은 기능을 하는 다른 라이브러리로 교체해주면 된다. 물론 그냥 놔두는 것도 하나의 방법이 될 수 있겠다. 내가 회사에서 관리하는 레포 하나도 이런 이슈가 하나 있는데, 위험도가 낮음으로 설정되어 있어서 그냥 두었다. 높은 위험도라면 우선적으로 빠르게 교체하도록 하자.
